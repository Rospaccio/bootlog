[ {
  "id" : 1,
  "sourceUrl" : "bootlog-01",
  "title" : "Why Bootlog",
  "publishedOn" : [ 2016, 11, 5, 19, 10 ],
  "editedOn" : null,
  "text" : {
    "id" : 1,
    "content" : "# Why Bootlog\r\n\r\nSome time ago I made [MiBECoM](http://www.codevomit.xyz/blog/#/the_problem_with_wordpress_code_tag.md), \r\nan \"almost serverless\" blog written in JavaScript.\r\nThe only thing that is needed in order for MiBECoM to be deployed is \r\na Web Server (I used Apache, but anything that could serve static files is\r\ngood as well). \r\n\r\nI intented to use MiBECoM as a replacement of my Wordpress blog, because \r\nof the infamous \"code tag problem\" that I described in the post linked above.\r\n\r\nI finally gave up when I faced the SEO (Search Engine Optimization) problem applyed\r\nto JavaScript applications: since the rendering is almost completely performed on the client, \r\nin order for my site to be crawled and indexed by Google\r\nand other search engines, I had to set up something like [PhantomJS](http://phantomjs.org/). An activity that\r\nrevealed to be much more time consuming than I anticipated and ultimately hinders \r\nthe entire concept of a \"serverless\" blog engine.\r\n\r\nAt this point the motives that convinced me to build my own blog application were \r\nstill intact: the code tag in Wordpress still works as shit and the blog statistics\r\nare very poor unless you integrate the Google Analytics plugin, \r\nwhich requires either to pay \r\na substantial fee or to roll out you own Wordpress installation, which also is not \r\nfree (and comes with a whole new range of security concerns).\r\nMarkdown is still my language of choice for writing posts, since it guarantees \r\na consistent style and the ability to version your articles using Git just like\r\nyou do with code.\r\n\r\nAfter trying an AngularJS variation of MiBECoM, I Finally I gave up on my \r\nJavaScript ambitions, which have been an endless source of frustrations and \r\nseemingly random problems. I switched back to what I should have done since the \r\nbeginning of this story:\r\nbuilding the blog application with Java, Spring Boot and Thymeleaf.\r\n\r\nAh if that has been a relief!\r\n"
  }
}, {
  "id" : 2,
  "sourceUrl" : "just-a-rant",
  "title" : "Just a Rant",
  "publishedOn" : [ 2016, 11, 5, 19, 29 ],
  "editedOn" : null,
  "text" : {
    "id" : 2,
    "content" : "# Just a rant about StackOverflow\r\n\r\nThis is not really a rant about StackOverflow: the site is great and I think it is one of the best example on how to build an auto-regulating Internet community.\r\nIt's rather a rant about a very common attitude of some self proclaimed gurus. It can be found all over any kind of human communities and it tend to be ported to StackOverflow as well.\r\n\r\n## Messing around with Spring Boot\r\nLet me walk you through an example. A couple of weeks ago I adventured myself in an experiment: I took a Spring Boot application (guess which one?) and tried to package it as a zip archive with all the jar contained in a `lib` folder. I based my attempt on the work one of my colleagues did for a project, so **I know it works**, ok? It's proudly in production and it gives us no problems, ok? \r\n\r\nDuring my attempt to replicate the same kind of package I stumbled over a strange error: when launching the application with a command similar to the following\r\n\r\n        java -cp <the-right-classpath> my.main.class.Main\r\n\r\nI got:\r\n\r\n        Error: Could not find or load main class my.main.class.Main\r\n\r\nWait, what?\r\nI double and triple checked the JAR file: the class is right where expected. Plus, if I change the class with one that has not a main method and has no Spring annotations on it (don't if that is relevant, but it's what I observed so far), I get a much more sensible error:\r\n\r\n        Error: Main method not found in class not.my.main.class.Main, please define the main method as:\r\n        public static void main(String[] args)\r\n        or a JavaFX application class must extend javafx.application.Application\r\n\r\nOk, it cannot execute it, but at least it founds the class, which is exactly what I expected.\r\n\r\n## The question that should not have been asked\r\nSo, unable to make sense of the issue, I turned to StackOverflow and formulated a question. May I have done some mistakes? Of course i did, the thing doesn't work, that is why I am asking. May I have given more details in my question? Yes, I could, but it's always a compromise between perfect clarity and the time at your disposal. And you are not always at your best in explaining things and providing examples. Can someone criticize my question because it is not clear? Of course, and downvoting a badly asked question is one of the mechanisms at the core of StackOverflow. I don't like when it happens, but I can live with it, especially if there's also a comment explaining the reason (but this is rare, honestly).\r\n\r\nBut no, the smartass of the day showed up telling me:\r\n\r\n>Why are you using the assembly plugin? The spring boot plugin already does all what you want. You are basically working around/against the framework\r\n\r\nIt seems to me that Mr. BullyPants has no insights, no ideas, no suggestions. It can't make sense of the error either but basically it feels authorized to tell me that I am asking the wrong question. This is a mild form of Internet harassment, in my opinion, and it is a pity that this attitude is so widespread across StackOverflow. Am I not authorized to do **whatever the fuck I want with free software?** If something behaves in a way that is strange and I cannot figure out why, **can't I ask a question about it?** I may well be doing something doomed to fail, in fact it is failing, but **why the fuck I can't ask why it is failing, and how?**\r\n\r\nIn fact, as I \"politely\" pointed out to my new friend prof. IKnowBetter:\r\n\r\n>Yes, I know, it is not orthodox, in fact I just reverted to the standard. But do you have any answers to the questions I asked? Don't you think I might have reasons for doing that? Since I must copy the artifact to a server over a very slow network, being able to copy only the JARs that have changed, would speed up my work. The \"assembly\" thing is just one of the solutions I have tried.\r\n\r\nBut even if I was doing the experiment just for fun, or for research, or to mess things up and see what happens, or because my religion imposes me to do so, what makes you so arrogant and dogmatic to the point where you reply:\r\n\r\n>Why use a framework if you don't want to use the framework but try to work around it? Spring Boot expects a certain structure in the jar/war it creates else it won't work. Next to that you seem to be delivering 2 artifacts one for local use and one for production use, which would be a no-go in my book. You have no way to guarantee that the same code/dependencies are available.\r\n\r\n## The expert's contribution\r\n\r\nAt this point I was very, very pissed off. First because I explained him *why*, but it keeps asking *Why use a framework...*. Are you stupid or what? Second, remember, **I know** that this packaging works, when done properly. Well, Mr. SmartAss, in *my* book, your attitude is that of a frustrated pretentious person who feels better bullying colleagues exposing their weaknesses and doubts, just to get that ephemeral high bad persons have when they put someone down. I've seen this behavior hundreds of times and it usually falls under the trademark of Accenture.\r\n\r\nI replied with something a bit less polite that has then been removed (not by me, but by moderators I assume), but it sounded something like:\r\n\r\n>Given that I am committing a crime here (using the framework against the laws **you** set for it), I encountered an unexpected behavior and I was just curious to find out the reason. I fail to see how your contribution is constructive in this context. \r\n\r\nAfter that I promised not to waste another minute to write something to my dear new friend, which I kept. And he? Oh, Dr. FullOfBullshit had another expert remark to close our productive conversation. Look at how he had the last word on the topic:\r\n\r\n>As stated spring boot expects a certain layout, your solution is in violation of that layout. Hence it will not work. It also requires certain additional entries in the MANIFEST.MF which your plugin doesn't add, again this will make it not work. All those things are taken care of with the spring-boot-maven-plugin. If you want your own zip, you would also need to run it in different ways and cannot expect the default to work.\r\n\r\nBlah, blah, blah. Still, no answers to my question. I do not doubt that Mr. IAmTheAuthorityOnSpring would have found the flaw in my setup if he only wanted to deepen the investigation (and if you really want, you usually ask for additional informations). But no, he was content with looking as the smartest cock, at least to his own eyes. If you do not want get involved in the process of understanding, at least have the sense to shut the fuck up.\r\n\r\n## Lessons learned\r\nApart from the huge amount of rage and anger, I think that there is a second, more general consequence of this mentality. \r\nThe attitude that emerges here is a dogmatic approach and a consequent excommunication of those who try to do things differently from the standard. Which is exactly the opposite of what drives developer to innovative inventions. That mindset is the one that would have left us inside the cave, 'cause the framework requires you to live there. This is what drives me crazy the most."
  }
}, {
  "id" : 3,
  "sourceUrl" : "starting-android-studio",
  "title" : "Starting Android Studio behind a proxy",
  "publishedOn" : [ 2016, 11, 6, 11, 12 ],
  "editedOn" : null,
  "text" : {
    "id" : 3,
    "content" : "# Starting Android Studio behind a proxy\r\n\r\n*This is an edited version of the most read article from my previous [Wordpress](http://codevomit.wordpress.com) blog. I replicate it here in an execrable attempt to drive visits up and test my new platform.*\r\n\r\nI recently installed the latest (stable) version of the new **Android Studio** IDE, the one based on IntelliJ IDEA.\r\nThe installation went OK but when I started the program, it remained stuck on the splash screen, with a message box saying: “getting Android SDK Component information” or something like that. \r\n\r\nThen, after 10 minutes or something, it finally timed out and loaded another screen, the Setup Wizard, that should help you configure Android Studio during the first startup. The same thing happened: it remained stuck for about 20 minutes, then told me that something was wrong and the application could not be started. That’s it. It seemed like you couldn't do anything about that.\r\n\r\nAs you might imagine, it is a network related problem. Actually it is clearly stated that you must have a stable internet connection to run Android Studio without incurring into any problems. The point is: I *had* a stable and fast Internet connection so the problem came down to the network proxy -- as usual. \r\n\r\nAfter I tried to start Android Studio without Internet (it failed immediately) and with a tethering connection to my phone (it quickly moved on from the first screen and greedily tried to download all the things), I was in a weird situation: I really needed to tell Android Studio to use a proxy before starting, but I could not do that without starting it first. It's a Deadlock.\r\nOr is it… I also have a clean Intellij IDEA installation on my computer so I thought that, since they are basically the same thing, I could try to set the proxy on IDEA and see what happens. Hopefully it stores the information in some human readable configuration file and I can steal that snippet and paste it on the corresponding Android Studio file.\r\n\r\nAfter a bit of searching, it turns out that this is exactly the case. I found the file `other.xml` in the folder `%HOME%\\.IdeaIC12\\config\\options`, where `%HOME%` is, quite obviously, your home folder in Windows.\r\nThe desired snippet is the following:\r\n\r\n        <component name=\"HttpConfigurable\">\r\n            <option name=\"PROXY_TYPE_IS_SOCKS\" value=\"false\" />\r\n            <option name=\"USE_HTTP_PROXY\" value=\"true\" />\r\n            <option name=\"USE_PROXY_PAC\" value=\"false\" />\r\n            <option name=\"PROXY_HOST\" value=\"101.116.3.251\" />\r\n            <option name=\"PROXY_PORT\" value=\"3128\" />\r\n            <option name=\"PROXY_AUTHENTICATION\" value=\"false\" />\r\n            <option name=\"PROXY_LOGIN\" value=\"\" />\r\n            <option name=\"PROXY_PASSWORD_CRYPT\" value=\"\" />\r\n            <option name=\"KEEP_PROXY_PASSWORD\" value=\"false\" />\r\n            <option name=\"myGenericPasswords\">\r\n            <map />\r\n            </option>\r\n            <option name=\"myGenericCancelled\">\r\n            <set />\r\n            </option>\r\n            <option name=\"PROXY_EXCEPTIONS\" value=\"localhost,127.0.0.1,101.*\" />\r\n        </component>\r\n\r\nYou can copy and paste it in the corresponding `other.xml` contained in `%HOME%\\.AndroidStudio\\config\\options` and it will do the trick. I am confident (not verified it) that you can do the same exact thing in Linux.\r\nDone this, Android Studio started without any problems."
  }
}, {
  "id" : 4,
  "sourceUrl" : "how-to-provide-spring-boot-fat-jar",
  "title" : "How to provide a Spring Boot \"fat JAR\" with external dependencies",
  "publishedOn" : [ 2016, 11, 26, 15, 56 ],
  "editedOn" : null,
  "text" : {
    "id" : 4,
    "content" : "# How to provide a Spring Boot \"fat JAR\" with external dependencies\r\n\r\nSpring Boot relies on the mechanism of \"Autoconfiguration\": the run time support that underlies a Spring Boot application is able to create and load objects into the context based on what it finds on the classpath. \r\n\r\nYou just add a dependency in the POM and a whole range of beans is available at run time, without you having to do anything in your own code. But there's more: certain beans' implementations are chosen depending on what is available on your classpath. The cool thing is that Spring Boot allows you to plug into this mechanism and become a first class citizen of the framework.\r\n\r\nBut there's a problem: what if you want to plug new implementations without recompiling your core application? By default this is not possible because the Spring Boot Maven plugin creates a JAR with the following structure:\r\n\r\n        \r\n        <base folder>\r\n        ????BOOT-INF\r\n        ?   ????classes\r\n        ?   ?   ????i18n\r\n        ?   ?   ????static\r\n        ?   ?   ????templates\r\n        ?   ?   ????xyz (your java packages)\r\n        ?   ????lib\r\n        ????META-INF\r\n        ????org (spring runtime support packages)\r\n\r\nand a Manifest that looks like this:\r\n\r\n        Manifest-Version: 1.0\r\n        Implementation-Title: bootlog\r\n        Implementation-Version: 0.0.1\r\n        Archiver-Version: Plexus Archiver\r\n        Built-By: merka\r\n        Implementation-Vendor-Id: xyz.codevomit\r\n        Spring-Boot-Version: 1.4.0.RELEASE\r\n        Implementation-Vendor: CodeVomit Productions\r\n        Main-Class: org.springframework.boot.loader.JarLauncher\r\n        Start-Class: xyz.codevomit.bootlog.BootlogApplication\r\n        Spring-Boot-Classes: BOOT-INF/classes/\r\n        Spring-Boot-Lib: BOOT-INF/lib/\r\n        Created-By: Apache Maven 3.3.3\r\n        Build-Jdk: 1.8.0_65\r\n        Implementation-URL: http://projects.spring.io/spring-boot/bootlog/\r\n\r\nThe important entries are `Main-Class` and `Start-Class`. The first is the actual main class called by the JVM. In this default case, the `JarLoader` is only able to locate and load classes inside BOOT-INT and JARs inside the lib directory. With this loader there's no way to add external JARs to the classpath.\r\n\r\n`Start-Class` is, quite obviously, the entry point of your implementation.\r\n\r\nLuckily Spring Boot has a simple way to enable the inclusion of external JARs. First of all, you'll have to recompile your project setting the ZIP layout for the Spring Boot Maven plugin. You do this with the following element in `pom.xml`:\r\n\r\n            <plugin>\r\n                <groupId>org.springframework.boot</groupId>\r\n                <artifactId>spring-boot-maven-plugin</artifactId>\r\n                <configuration>\r\n                    <layout>ZIP</layout>\r\n                </configuration>\r\n            </plugin>\r\n\r\nYour Manifest should look almost like the previous one, except for the `Main-Class` entry, which now is:\r\n\r\n        Main-Class: org.springframework.boot.loader.PropertiesLauncher\r\n\r\n`PropertiesLauncher`, unlike `JarLauncher` can read a property (`loader.path`), in which the runtime classpath is specified. With this new fat JAR you are now able to start the application with the command\r\n\r\n        java -Dloader.path=lib,external-jar.jar -jar my-app.jar\r\n\r\nor \r\n\r\n        java -jar my-app.jar --loader.path=lib,external-jar.jar\r\n\r\nthe value of the `loader.path` property is described as follows\r\n\r\n>Comma-separated Classpath, e.g. `lib,${HOME}/app/lib`. Earlier entries take precedence, just like a regular `-classpath` on the javac command line. (documentation [here](http://docs.spring.io/spring-boot/docs/current/reference/html/executable-jar.html))\r\n\r\n "
  }
}, {
  "id" : 5,
  "sourceUrl" : "postgres-case-sensitive",
  "title" : "Postgres case sensitive identifiers and Spring Data",
  "publishedOn" : [ 2016, 11, 29, 19, 36 ],
  "editedOn" : null,
  "text" : {
    "id" : 5,
    "content" : "# Postgres case sensitive identifiers and Spring Data\r\n\r\nRecently I interfaced a Spring application with an existing PostgreSQL database whose table and column names are defined to be case sensitive. The original DDL always puts quotes around table and column identifiers. For example:\r\n\r\n        CREATE TABLE \"Computer\"\r\n        (\r\n            \"RAM\" integer, \r\n            \"CPUCount\" integer, \r\n            \"CPUSpeed\" numeric(5,3),\r\n            \"IPAddress\" character varying(40),\r\n            \"IsVirtualMachine\" boolean,\r\n            CONSTRAINT \"Computer_pkey\" PRIMARY KEY (\"Id\")\r\n        )\r\n\r\nThe consequence is that if you issue this query to the database\r\n    \r\n        select * from Computer;\r\n\r\nyou get:\r\n\r\n        ERROR:  relation \"computer\" does not exist\r\n        LINE 1: select * from Computer;\r\n\r\nInstead, you have to write the query like this:\r\n\r\n        select * from \"Computer\";\r\n\r\nand the column names have to be enclosed between quotes as well:\r\n\r\n        select \"CPUNumber\" from \"Computer\";\r\n\r\n## How to make Spring Data JPA generate the right SQL\r\n\r\nIn the Spring Boot project, I defined an Entity for the \"Computer\" table:\r\n\r\n        @Entity\r\n        @Table(name = \"Computer\")\r\n        public class Computer\r\n        {\r\n            @Id\r\n            @Column(name = \"Id\")\r\n            Long id;\r\n            \r\n            @Column(name = \"RAM\")\r\n            Integer ram;\r\n            \r\n            @Column(name = \"CPUNumber\")\r\n            Integer cpuNumber;\r\n            \r\n            @Column(name = \"IPAddress\")\r\n            String ipAddress;\r\n            \r\n            @Column(name = \"IsVirtualMachine\")\r\n            Boolean virtualMachine;\r\n            \r\n        }\r\n\r\nBut, when starting the application or running a test, I was getting the following error (stacktrace omitted for brevity):\r\n\r\n        org.springframework.dao.InvalidDataAccessResourceUsageException: could not extract ResultSet; SQL [n/a]; nested exception is org.hibernate.exception.SQLGrammarException: could not extract ResultSet\r\n\r\nNot really enlightening. After enabling the log with level DEBUG, I got something much more sensible:\r\n\r\n        org.postgresql.util.PSQLException: ERROR: relation \"computer\" does not exist\r\n\r\nThe same error I got when directly issuing queries through the terminal. Cool, now I know what is wrong. In fact, looking at the generated SQL, I realized that all the identifiers were considered case insensitive, and were actually written in lower case. \r\nAfter a couple of failing fixes and a solid hour of troubleshooting I finally found a documentation page that told me how to solve this problem. The solution consists in adding two properties:\r\n\r\n        spring.jpa.properties.hibernate.globally_quoted_identifiers=true\r\n        spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\r\n\r\nThe first tells Hibernate to always enclose identifiers between quotes in the generated SQL, which is exactly what we want, but it is not enough.\r\nThe second property sets a naming strategy implementation which preserves whatever we have written as value of the name parameter for the `@Column` annotations. "
  }
} ]